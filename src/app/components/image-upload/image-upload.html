<div class="image-upload-container">
  <!-- Upload Area -->
  <div 
    class="upload-area frame-editor-canvas"
    [class.active]="isDragOver"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="fileInput.click()">
    
    <div class="upload-content text-center p-8">
      <div class="upload-icon mb-4">
        <i class="pi pi-cloud-upload text-4xl text-gray-400"></i>
      </div>
      
      <h3 class="text-lg font-semibold text-gray-700 mb-2">
        Tải lên ảnh của bạn
      </h3>
      
      <p class="text-gray-500 mb-4">
        Kéo thả ảnh vào đây hoặc click để chọn file
      </p>
      
      <div class="upload-formats text-sm text-gray-400">
        Hỗ trợ: JPG, PNG, WebP (tối đa 10MB)
      </div>
    </div>
  </div>

  <!-- File Input -->
  <input 
    #fileInput
    type="file" 
    class="hidden"
    accept="image/*"
    (change)="onFileSelected($event)">

  <!-- Preview Area -->
  <div *ngIf="previewUrl" class="preview-area mt-6">
    <div class="preview-header flex justify-between items-center mb-4">
      <h4 class="text-lg font-semibold text-gray-700">Xem trước</h4>
      <p-button 
        icon="pi pi-times"
        class="p-button-text p-button-sm"
        (onClick)="clearPreview()"
        pTooltip="Xóa ảnh">
      </p-button>
    </div>
    
    <div class="preview-image-container bg-gray-50 rounded-lg p-4">
      <img 
        [src]="previewUrl" 
        [alt]="fileName"
        class="max-w-full max-h-64 mx-auto rounded shadow-sm">
      
      <div class="image-info mt-3 text-sm text-gray-600 text-center">
        <span class="font-medium">{{ fileName }}</span>
        <span class="mx-2">•</span>
        <span>{{ fileSize }}</span>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons mt-4 flex gap-3 justify-center">
      <p-button 
        label="Sử dụng ảnh này"
        icon="pi pi-check"
        class="p-button-sm"
        (onClick)="useImage()"
        [disabled]="isUploading">
      </p-button>
      
      <p-button 
        label="Chọn ảnh khác"
        icon="pi pi-refresh"
        class="p-button-outlined p-button-sm"
        (onClick)="selectNewImage()">
      </p-button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isUploading" class="loading-overlay">
    <div class="loading-content text-center">
      <div class="loading-spinner w-8 h-8 mx-auto mb-3"></div>
      <p class="text-gray-600">Đang xử lý ảnh...</p>
    </div>
  </div>

  <!-- Error Message -->
  <p-message 
    *ngIf="errorMessage"
    severity="error" 
    [text]="errorMessage"
    class="mt-4">
  </p-message>
</div>
